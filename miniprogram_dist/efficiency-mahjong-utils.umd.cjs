(function(o,O){typeof exports=="object"&&typeof module<"u"?O(exports):typeof define=="function"&&define.amd?define(["exports"],O):(o=typeof globalThis<"u"?globalThis:o||self,O(o.EfficiencyMahjongUtils={}))})(this,function(o){"use strict";function O(e,t){const r=e.length,n=e.replace(new RegExp(t,"g"),"");if(r-n.length>1)return[t.repeat(2),n.padStart(r-2,t)]}function Te(e,t){const r=e.length,n=e.replace(new RegExp(t,"g"),"");if(r-n.length>=3)return[t.repeat(3),n.padStart(r-3,t)]}function Se(e,t,r){if(r==="z"||t==="8"||t==="9")return;const n=String(Number(t)+1),a=String(Number(t)+2);if(e.includes(n)&&e.includes(a)){const i=e.replace(t,"").replace(n,"").replace(a,"");return[t+n+a,i]}}function me(e,t,r){if(t==="1"||t==="8"||t==="9"||r==="z")return;const n=String(Number(t)+1);if(e.includes(n))return[t+n,e.replace(t,"").replace(n,"")]}function Oe(e,t,r){if(t!=="8"&&t!=="1"||r==="z")return;const n=String(Number(t)+1);if(e.includes(n))return[t+n,e.replace(t,"").replace(n,"")]}function Ae(e,t,r){if(t==="8"||t==="9"||r==="z")return;const n=String(Number(t)+2);if(e.includes(n))return[t+n,e.replace(t,"").replace(n,"")]}function Ht(e,t){let r=0;for(const n of t)e===n&&r++;return r}function D(e,t){return e.length===t&&new Set(e.split("")).size===1}function y(e){return e.split("").map(Number).sort((t,r)=>t-r)}function d(e){const t=e.slice(-1);return[e.slice(0,-1),t]}function je(e){const t=[];let r=[];for(const n of e)Number.isNaN(Number(n))?(t.push(...r.map(a=>a+n)),r=[]):r.push(n);return t}function L(e){const t=["s","m","p","z"],r={s:"",m:"",p:"",z:""};let n="";for(const a of e)t.includes(a)?(r[a]+=n,n=""):n+=a;return r}function R(e){return Object.entries(e).map(([t,r])=>r?r+t:"").join("")}function kt(e){const t=L(e);for(const r in t){const n=t[r];t[r]=y(n).join("")}return R(t)}function qt(e,t,r){const n=L(e);let[a,i]=d(t);return n[i]=n[i].replace(a,""),[a,i]=d(r),n[i]=n[i]+a,n[i]=y(n[i]).join(""),R(n)}function Wt(e){return(t,r)=>{const n=[],a=new Set;for(const i of t){if(a.has(i))continue;a.add(i);const s=e(t,i,r);s&&n.push(s)}return n}}function J(e){return t=>{const r=[],n=L(t);return e.forEach(a=>{const i=Wt(a);Object.entries(n).map(([s,c])=>{i(c,s).forEach(([f,v])=>{r.push([f+s,R({...n,[s]:v})])})})}),r}}const Ce=J([Te,Se]),Ie=J([O]),Pe=J([me,Ae,Oe]);var B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function X(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vt=typeof B=="object"&&B&&B.Object===Object&&B,we=Vt,Yt=we,Jt=typeof self=="object"&&self&&self.Object===Object&&self,Xt=Yt||Jt||Function("return this")(),p=Xt,Zt=p,Qt=Zt.Symbol,Z=Qt,Me=Z,Ee=Object.prototype,er=Ee.hasOwnProperty,tr=Ee.toString,E=Me?Me.toStringTag:void 0;function rr(e){var t=er.call(e,E),r=e[E];try{e[E]=void 0;var n=!0}catch{}var a=tr.call(e);return n&&(t?e[E]=r:delete e[E]),a}var nr=rr,ar=Object.prototype,ir=ar.toString;function sr(e){return ir.call(e)}var or=sr,Ne=Z,cr=nr,ur=or,fr="[object Null]",lr="[object Undefined]",Fe=Ne?Ne.toStringTag:void 0;function hr(e){return e==null?e===void 0?lr:fr:Fe&&Fe in Object(e)?cr(e):ur(e)}var N=hr;function gr(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var _=gr,dr=N,vr=_,pr="[object AsyncFunction]",yr="[object Function]",br="[object GeneratorFunction]",$r="[object Proxy]";function _r(e){if(!vr(e))return!1;var t=dr(e);return t==yr||t==br||t==pr||t==$r}var De=_r,Tr=p,Sr=Tr["__core-js_shared__"],mr=Sr,Q=mr,Le=function(){var e=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Or(e){return!!Le&&Le in e}var Ar=Or,jr=Function.prototype,Cr=jr.toString;function Ir(e){if(e!=null){try{return Cr.call(e)}catch{}try{return e+""}catch{}}return""}var Re=Ir,Pr=De,wr=Ar,Mr=_,Er=Re,Nr=/[\\^$.*+?()[\]{}|]/g,Fr=/^\[object .+?Constructor\]$/,Dr=Function.prototype,Lr=Object.prototype,Rr=Dr.toString,Br=Lr.hasOwnProperty,Gr=RegExp("^"+Rr.call(Br).replace(Nr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ur(e){if(!Mr(e)||wr(e))return!1;var t=Pr(e)?Gr:Fr;return t.test(Er(e))}var xr=Ur;function zr(e,t){return e==null?void 0:e[t]}var Kr=zr,Hr=xr,kr=Kr;function qr(e,t){var r=kr(e,t);return Hr(r)?r:void 0}var T=qr,Wr=T,Vr=Wr(Object,"create"),G=Vr,Be=G;function Yr(){this.__data__=Be?Be(null):{},this.size=0}var Jr=Yr;function Xr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Zr=Xr,Qr=G,en="__lodash_hash_undefined__",tn=Object.prototype,rn=tn.hasOwnProperty;function nn(e){var t=this.__data__;if(Qr){var r=t[e];return r===en?void 0:r}return rn.call(t,e)?t[e]:void 0}var an=nn,sn=G,on=Object.prototype,cn=on.hasOwnProperty;function un(e){var t=this.__data__;return sn?t[e]!==void 0:cn.call(t,e)}var fn=un,ln=G,hn="__lodash_hash_undefined__";function gn(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ln&&t===void 0?hn:t,this}var dn=gn,vn=Jr,pn=Zr,yn=an,bn=fn,$n=dn;function A(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}A.prototype.clear=vn,A.prototype.delete=pn,A.prototype.get=yn,A.prototype.has=bn,A.prototype.set=$n;var _n=A;function Tn(){this.__data__=[],this.size=0}var Sn=Tn;function mn(e,t){return e===t||e!==e&&t!==t}var ee=mn,On=ee;function An(e,t){for(var r=e.length;r--;)if(On(e[r][0],t))return r;return-1}var U=An,jn=U,Cn=Array.prototype,In=Cn.splice;function Pn(e){var t=this.__data__,r=jn(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():In.call(t,r,1),--this.size,!0}var wn=Pn,Mn=U;function En(e){var t=this.__data__,r=Mn(t,e);return r<0?void 0:t[r][1]}var Nn=En,Fn=U;function Dn(e){return Fn(this.__data__,e)>-1}var Ln=Dn,Rn=U;function Bn(e,t){var r=this.__data__,n=Rn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Gn=Bn,Un=Sn,xn=wn,zn=Nn,Kn=Ln,Hn=Gn;function j(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}j.prototype.clear=Un,j.prototype.delete=xn,j.prototype.get=zn,j.prototype.has=Kn,j.prototype.set=Hn;var x=j,kn=T,qn=p,Wn=kn(qn,"Map"),te=Wn,Ge=_n,Vn=x,Yn=te;function Jn(){this.size=0,this.__data__={hash:new Ge,map:new(Yn||Vn),string:new Ge}}var Xn=Jn;function Zn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Qn=Zn,ea=Qn;function ta(e,t){var r=e.__data__;return ea(t)?r[typeof t=="string"?"string":"hash"]:r.map}var z=ta,ra=z;function na(e){var t=ra(this,e).delete(e);return this.size-=t?1:0,t}var aa=na,ia=z;function sa(e){return ia(this,e).get(e)}var oa=sa,ca=z;function ua(e){return ca(this,e).has(e)}var fa=ua,la=z;function ha(e,t){var r=la(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var ga=ha,da=Xn,va=aa,pa=oa,ya=fa,ba=ga;function C(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}C.prototype.clear=da,C.prototype.delete=va,C.prototype.get=pa,C.prototype.has=ya,C.prototype.set=ba;var Ue=C,$a="__lodash_hash_undefined__";function _a(e){return this.__data__.set(e,$a),this}var Ta=_a;function Sa(e){return this.__data__.has(e)}var ma=Sa,Oa=Ue,Aa=Ta,ja=ma;function K(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Oa;++t<r;)this.add(e[t])}K.prototype.add=K.prototype.push=Aa,K.prototype.has=ja;var Ca=K;function Ia(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var Pa=Ia;function wa(e){return e!==e}var Ma=wa;function Ea(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var Na=Ea,Fa=Pa,Da=Ma,La=Na;function Ra(e,t,r){return t===t?La(e,t,r):Fa(e,Da,r)}var Ba=Ra,Ga=Ba;function Ua(e,t){var r=e==null?0:e.length;return!!r&&Ga(e,t,0)>-1}var xa=Ua;function za(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var Ka=za;function Ha(e,t){return e.has(t)}var ka=Ha,qa=T,Wa=p,Va=qa(Wa,"Set"),xe=Va;function Ya(){}var Ja=Ya;function Xa(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var ze=Xa,re=xe,Za=Ja,Qa=ze,ei=1/0,ti=re&&1/Qa(new re([,-0]))[1]==ei?function(e){return new re(e)}:Za,ri=ti,ni=Ca,ai=xa,ii=Ka,si=ka,oi=ri,ci=ze,ui=200;function fi(e,t,r){var n=-1,a=ai,i=e.length,s=!0,c=[],u=c;if(r)s=!1,a=ii;else if(i>=ui){var f=t?null:oi(e);if(f)return ci(f);s=!1,a=si,u=new ni}else u=t?[]:c;e:for(;++n<i;){var v=e[n],g=t?t(v):v;if(v=r||v!==0?v:0,s&&g===g){for(var b=u.length;b--;)if(u[b]===g)continue e;t&&u.push(g),c.push(v)}else a(u,g,r)||(u!==c&&u.push(g),c.push(v))}return c}var li=fi,hi=li;function gi(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?hi(e,void 0,t):[]}var di=gi;const vi=X(di);var pi=x;function yi(){this.__data__=new pi,this.size=0}var bi=yi;function $i(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var _i=$i;function Ti(e){return this.__data__.get(e)}var Si=Ti;function mi(e){return this.__data__.has(e)}var Oi=mi,Ai=x,ji=te,Ci=Ue,Ii=200;function Pi(e,t){var r=this.__data__;if(r instanceof Ai){var n=r.__data__;if(!ji||n.length<Ii-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ci(n)}return r.set(e,t),this.size=r.size,this}var wi=Pi,Mi=x,Ei=bi,Ni=_i,Fi=Si,Di=Oi,Li=wi;function I(e){var t=this.__data__=new Mi(e);this.size=t.size}I.prototype.clear=Ei,I.prototype.delete=Ni,I.prototype.get=Fi,I.prototype.has=Di,I.prototype.set=Li;var Ri=I;function Bi(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Gi=Bi,Ui=T,xi=function(){try{var e=Ui(Object,"defineProperty");return e({},"",{}),e}catch{}}(),zi=xi,Ke=zi;function Ki(e,t,r){t=="__proto__"&&Ke?Ke(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var He=Ki,Hi=He,ki=ee,qi=Object.prototype,Wi=qi.hasOwnProperty;function Vi(e,t,r){var n=e[t];(!(Wi.call(e,t)&&ki(n,r))||r===void 0&&!(t in e))&&Hi(e,t,r)}var ke=Vi,Yi=ke,Ji=He;function Xi(e,t,r,n){var a=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var c=t[i],u=n?n(r[c],e[c],c,r,e):void 0;u===void 0&&(u=e[c]),a?Ji(r,c,u):Yi(r,c,u)}return r}var H=Xi;function Zi(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Qi=Zi;function es(e){return e!=null&&typeof e=="object"}var P=es,ts=N,rs=P,ns="[object Arguments]";function as(e){return rs(e)&&ts(e)==ns}var is=as,qe=is,ss=P,We=Object.prototype,os=We.hasOwnProperty,cs=We.propertyIsEnumerable,us=qe(function(){return arguments}())?qe:function(e){return ss(e)&&os.call(e,"callee")&&!cs.call(e,"callee")},fs=us,ls=Array.isArray,ne=ls,k={exports:{}};function hs(){return!1}var gs=hs;k.exports,function(e,t){var r=p,n=gs,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===a,c=s?r.Buffer:void 0,u=c?c.isBuffer:void 0,f=u||n;e.exports=f}(k,k.exports);var Ve=k.exports,ds=9007199254740991,vs=/^(?:0|[1-9]\d*)$/;function ps(e,t){var r=typeof e;return t=t??ds,!!t&&(r=="number"||r!="symbol"&&vs.test(e))&&e>-1&&e%1==0&&e<t}var Ye=ps,ys=9007199254740991;function bs(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ys}var Je=bs,$s=N,_s=Je,Ts=P,Ss="[object Arguments]",ms="[object Array]",Os="[object Boolean]",As="[object Date]",js="[object Error]",Cs="[object Function]",Is="[object Map]",Ps="[object Number]",ws="[object Object]",Ms="[object RegExp]",Es="[object Set]",Ns="[object String]",Fs="[object WeakMap]",Ds="[object ArrayBuffer]",Ls="[object DataView]",Rs="[object Float32Array]",Bs="[object Float64Array]",Gs="[object Int8Array]",Us="[object Int16Array]",xs="[object Int32Array]",zs="[object Uint8Array]",Ks="[object Uint8ClampedArray]",Hs="[object Uint16Array]",ks="[object Uint32Array]",h={};h[Rs]=h[Bs]=h[Gs]=h[Us]=h[xs]=h[zs]=h[Ks]=h[Hs]=h[ks]=!0,h[Ss]=h[ms]=h[Ds]=h[Os]=h[Ls]=h[As]=h[js]=h[Cs]=h[Is]=h[Ps]=h[ws]=h[Ms]=h[Es]=h[Ns]=h[Fs]=!1;function qs(e){return Ts(e)&&_s(e.length)&&!!h[$s(e)]}var Ws=qs;function Vs(e){return function(t){return e(t)}}var ae=Vs,q={exports:{}};q.exports,function(e,t){var r=we,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,s=i&&r.process,c=function(){try{var u=a&&a.require&&a.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();e.exports=c}(q,q.exports);var ie=q.exports,Ys=Ws,Js=ae,Xe=ie,Ze=Xe&&Xe.isTypedArray,Xs=Ze?Js(Ze):Ys,Zs=Xs,Qs=Qi,eo=fs,to=ne,ro=Ve,no=Ye,ao=Zs,io=Object.prototype,so=io.hasOwnProperty;function oo(e,t){var r=to(e),n=!r&&eo(e),a=!r&&!n&&ro(e),i=!r&&!n&&!a&&ao(e),s=r||n||a||i,c=s?Qs(e.length,String):[],u=c.length;for(var f in e)(t||so.call(e,f))&&!(s&&(f=="length"||a&&(f=="offset"||f=="parent")||i&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||no(f,u)))&&c.push(f);return c}var Qe=oo,co=Object.prototype;function uo(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||co;return e===r}var se=uo;function fo(e,t){return function(r){return e(t(r))}}var et=fo,lo=et,ho=lo(Object.keys,Object),go=ho,vo=se,po=go,yo=Object.prototype,bo=yo.hasOwnProperty;function $o(e){if(!vo(e))return po(e);var t=[];for(var r in Object(e))bo.call(e,r)&&r!="constructor"&&t.push(r);return t}var _o=$o,To=De,So=Je;function mo(e){return e!=null&&So(e.length)&&!To(e)}var oe=mo,Oo=Qe,Ao=_o,jo=oe;function Co(e){return jo(e)?Oo(e):Ao(e)}var ce=Co,Io=H,Po=ce;function wo(e,t){return e&&Io(t,Po(t),e)}var Mo=wo;function Eo(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var No=Eo,Fo=_,Do=se,Lo=No,Ro=Object.prototype,Bo=Ro.hasOwnProperty;function Go(e){if(!Fo(e))return Lo(e);var t=Do(e),r=[];for(var n in e)n=="constructor"&&(t||!Bo.call(e,n))||r.push(n);return r}var Uo=Go,xo=Qe,zo=Uo,Ko=oe;function Ho(e){return Ko(e)?xo(e,!0):zo(e)}var ue=Ho,ko=H,qo=ue;function Wo(e,t){return e&&ko(t,qo(t),e)}var Vo=Wo,W={exports:{}};W.exports,function(e,t){var r=p,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,s=i?r.Buffer:void 0,c=s?s.allocUnsafe:void 0;function u(f,v){if(v)return f.slice();var g=f.length,b=c?c(g):new f.constructor(g);return f.copy(b),b}e.exports=u}(W,W.exports);var Yo=W.exports;function Jo(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Xo=Jo;function Zo(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[a++]=s)}return i}var Qo=Zo;function ec(){return[]}var tt=ec,tc=Qo,rc=tt,nc=Object.prototype,ac=nc.propertyIsEnumerable,rt=Object.getOwnPropertySymbols,ic=rt?function(e){return e==null?[]:(e=Object(e),tc(rt(e),function(t){return ac.call(e,t)}))}:rc,fe=ic,sc=H,oc=fe;function cc(e,t){return sc(e,oc(e),t)}var uc=cc;function fc(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var nt=fc,lc=et,hc=lc(Object.getPrototypeOf,Object),at=hc,gc=nt,dc=at,vc=fe,pc=tt,yc=Object.getOwnPropertySymbols,bc=yc?function(e){for(var t=[];e;)gc(t,vc(e)),e=dc(e);return t}:pc,it=bc,$c=H,_c=it;function Tc(e,t){return $c(e,_c(e),t)}var Sc=Tc,mc=nt,Oc=ne;function Ac(e,t,r){var n=t(e);return Oc(e)?n:mc(n,r(e))}var st=Ac,jc=st,Cc=fe,Ic=ce;function Pc(e){return jc(e,Ic,Cc)}var wc=Pc,Mc=st,Ec=it,Nc=ue;function Fc(e){return Mc(e,Nc,Ec)}var Dc=Fc,Lc=T,Rc=p,Bc=Lc(Rc,"DataView"),Gc=Bc,Uc=T,xc=p,zc=Uc(xc,"Promise"),Kc=zc,Hc=T,kc=p,qc=Hc(kc,"WeakMap"),Wc=qc,le=Gc,he=te,ge=Kc,de=xe,ve=Wc,ot=N,w=Re,ct="[object Map]",Vc="[object Object]",ut="[object Promise]",ft="[object Set]",lt="[object WeakMap]",ht="[object DataView]",Yc=w(le),Jc=w(he),Xc=w(ge),Zc=w(de),Qc=w(ve),S=ot;(le&&S(new le(new ArrayBuffer(1)))!=ht||he&&S(new he)!=ct||ge&&S(ge.resolve())!=ut||de&&S(new de)!=ft||ve&&S(new ve)!=lt)&&(S=function(e){var t=ot(e),r=t==Vc?e.constructor:void 0,n=r?w(r):"";if(n)switch(n){case Yc:return ht;case Jc:return ct;case Xc:return ut;case Zc:return ft;case Qc:return lt}return t});var pe=S,eu=Object.prototype,tu=eu.hasOwnProperty;function ru(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&tu.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var nu=ru,au=p,iu=au.Uint8Array,su=iu,gt=su;function ou(e){var t=new e.constructor(e.byteLength);return new gt(t).set(new gt(e)),t}var ye=ou,cu=ye;function uu(e,t){var r=t?cu(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var fu=uu,lu=/\w*$/;function hu(e){var t=new e.constructor(e.source,lu.exec(e));return t.lastIndex=e.lastIndex,t}var gu=hu,dt=Z,vt=dt?dt.prototype:void 0,pt=vt?vt.valueOf:void 0;function du(e){return pt?Object(pt.call(e)):{}}var vu=du,pu=ye;function yu(e,t){var r=t?pu(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var bu=yu,$u=ye,_u=fu,Tu=gu,Su=vu,mu=bu,Ou="[object Boolean]",Au="[object Date]",ju="[object Map]",Cu="[object Number]",Iu="[object RegExp]",Pu="[object Set]",wu="[object String]",Mu="[object Symbol]",Eu="[object ArrayBuffer]",Nu="[object DataView]",Fu="[object Float32Array]",Du="[object Float64Array]",Lu="[object Int8Array]",Ru="[object Int16Array]",Bu="[object Int32Array]",Gu="[object Uint8Array]",Uu="[object Uint8ClampedArray]",xu="[object Uint16Array]",zu="[object Uint32Array]";function Ku(e,t,r){var n=e.constructor;switch(t){case Eu:return $u(e);case Ou:case Au:return new n(+e);case Nu:return _u(e,r);case Fu:case Du:case Lu:case Ru:case Bu:case Gu:case Uu:case xu:case zu:return mu(e,r);case ju:return new n;case Cu:case wu:return new n(e);case Iu:return Tu(e);case Pu:return new n;case Mu:return Su(e)}}var Hu=Ku,ku=_,yt=Object.create,qu=function(){function e(){}return function(t){if(!ku(t))return{};if(yt)return yt(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Wu=qu,Vu=Wu,Yu=at,Ju=se;function Xu(e){return typeof e.constructor=="function"&&!Ju(e)?Vu(Yu(e)):{}}var Zu=Xu,Qu=pe,ef=P,tf="[object Map]";function rf(e){return ef(e)&&Qu(e)==tf}var nf=rf,af=nf,sf=ae,bt=ie,$t=bt&&bt.isMap,of=$t?sf($t):af,cf=of,uf=pe,ff=P,lf="[object Set]";function hf(e){return ff(e)&&uf(e)==lf}var gf=hf,df=gf,vf=ae,_t=ie,Tt=_t&&_t.isSet,pf=Tt?vf(Tt):df,yf=pf,bf=Ri,$f=Gi,_f=ke,Tf=Mo,Sf=Vo,mf=Yo,Of=Xo,Af=uc,jf=Sc,Cf=wc,If=Dc,Pf=pe,wf=nu,Mf=Hu,Ef=Zu,Nf=ne,Ff=Ve,Df=cf,Lf=_,Rf=yf,Bf=ce,Gf=ue,Uf=1,xf=2,zf=4,St="[object Arguments]",Kf="[object Array]",Hf="[object Boolean]",kf="[object Date]",qf="[object Error]",mt="[object Function]",Wf="[object GeneratorFunction]",Vf="[object Map]",Yf="[object Number]",Ot="[object Object]",Jf="[object RegExp]",Xf="[object Set]",Zf="[object String]",Qf="[object Symbol]",el="[object WeakMap]",tl="[object ArrayBuffer]",rl="[object DataView]",nl="[object Float32Array]",al="[object Float64Array]",il="[object Int8Array]",sl="[object Int16Array]",ol="[object Int32Array]",cl="[object Uint8Array]",ul="[object Uint8ClampedArray]",fl="[object Uint16Array]",ll="[object Uint32Array]",l={};l[St]=l[Kf]=l[tl]=l[rl]=l[Hf]=l[kf]=l[nl]=l[al]=l[il]=l[sl]=l[ol]=l[Vf]=l[Yf]=l[Ot]=l[Jf]=l[Xf]=l[Zf]=l[Qf]=l[cl]=l[ul]=l[fl]=l[ll]=!0,l[qf]=l[mt]=l[el]=!1;function V(e,t,r,n,a,i){var s,c=t&Uf,u=t&xf,f=t&zf;if(r&&(s=a?r(e,n,a,i):r(e)),s!==void 0)return s;if(!Lf(e))return e;var v=Nf(e);if(v){if(s=wf(e),!c)return Of(e,s)}else{var g=Pf(e),b=g==mt||g==Wf;if(Ff(e))return mf(e,c);if(g==Ot||g==St||b&&!a){if(s=u||b?{}:Ef(e),!c)return u?jf(e,Sf(s,e)):Af(e,Tf(s,e))}else{if(!l[g])return a?e:{};s=Mf(e,g,c)}}i||(i=new bf);var zt=i.get(e);if(zt)return zt;i.set(e,s),Rf(e)?e.forEach(function($){s.add(V($,t,r,$,e,i))}):Df(e)&&e.forEach(function($,m){s.set(m,V($,t,r,m,e,i))});var mh=f?u?If:Cf:u?Gf:Bf,Kt=v?void 0:mh(e);return $f(Kt||e,function($,m){Kt&&(m=$,$=e[m]),_f(s,m,V($,t,r,m,e,i))}),s}var hl=V,gl=hl,dl=1,vl=4;function pl(e){return gl(e,dl|vl)}var yl=pl;const bl=X(yl);function At(e,t,r){const n=r(e.left),a=[];return n.forEach(([i,s])=>{const c=bl(e);c.left=s;const u=c[t];Array.isArray(u)&&u.push(i),At(c,t,r),a.push(c)}),e.children=a,e}function jt(e,t=[]){if(e.children.length===0)t.push(e);else for(const r of e.children)jt(r,t);return t}function $l(e,t){if(e.left!==t.left)return!1;const r=e.faces,n=t.faces;return!(r.length!==n.length||new Set([...r,...n]).size!==r.length)}function F(e){let t=[new Lt(e)];const r=[["faces",Ce],["doubles",Ie],["partners",Pe]];for(const[a,i]of r){const s=[];t.forEach(c=>{const u=At(c,a,i),f=jt(u);s.push(...f)}),t=s}const n=vi(t,$l);return n.forEach(a=>{a.singles=je(a.left),a.left=""}),n}const Ct=["m","p","s","z"],It=["m","p","s"],Pt="z";function Y(e){return Ct.includes(e)}function M(e){return It.includes(e)}function _l(e){return Pt===e}function Tl(e){return wt(e)||Mt(e)}function wt(e){const[t,r]=d(e);if(!M(r)||t.length!==3)return!1;const[n,a,i]=y(t);return n+1===a&&a+1===i}function Mt(e){const[t,r]=d(e);return Y(r)&&D(t,3)}function Sl(e){const[t,r]=d(e);return Y(r)&&D(t,2)}function ml(e){const[t,r]=d(e);return Y(r)&&D(t,4)}function be(e){const[t,r]=d(e);if(t.length!==2||!M(r))return!1;const[n,a]=y(t);return n+1===a&&n!==1&&n!==8}function $e(e){const[t,r]=d(e);if(t.length!==2||!M(r))return!1;const[n,a]=y(t);return n+2===a}function _e(e){const[t,r]=d(e);return t.length!==2||!M(r)?!1:["12","21","89","98"].includes(t)}function Ol(e){const[t,r]=d(e);if(t.length!==2||!M(r))return!1;const[n,a]=y(t);return n+1===a||n+2===a}function Al(e){return F(e).some(t=>t.isReady())}function jl(e){return F(e).some(t=>t.isSucess())}function Et(e){if(!be(e))return[];const[t,r]=d(e),[n,a]=y(t);return[n-1+r,a+1+r]}function Nt(e){if(!$e(e))return[];const[t,r]=d(e),[n]=y(t);return[n+1+r]}function Ft(e){if(!_e(e))return[];const[t,r]=d(e);return t==="12"||t==="21"?["3"+r]:t==="89"||t==="98"?["7"+r]:[]}function Dt(e){return _e(e)?Ft(e):$e(e)?Nt(e):be(e)?Et(e):[]}function Cl(e){const t=new Set;return F(e).forEach(n=>{n.getMatchesOfSuccess().forEach(a=>t.add(a))}),Array.from(t)}function Il(e){const t=F(e);let r=8;return t.forEach(n=>{const a=n.getMatchNumOfReady();a<r&&(r=a)}),r}class Lt{constructor(t){this.full="",this.size=0,this.left="",this.faces=[],this.doubles=[],this.partners=[],this.singles=[],this.children=[],t&&(this.full=t,this.left=t,this.size=t.replace(/\D/g,"").length)}isReady(){const{left:t,faces:r,partners:n,singles:a,doubles:i}=this;if(t!=="")return;const s=a.length,c=i.length,u=r.length,f=n.length;return s===0&&c===1&&f===1||u>0&&c===0&&f===0&&s===1||c===2&&f===0&&s===0}isSucess(){const{left:t,faces:r,partners:n,singles:a,doubles:i}=this;return t===""&&n.length===0&&a.length===0&&i.length===1&&r.length>0}getMatchesOfSuccess(){const t=[];if(this.isReady()){const{singles:r,doubles:n,partners:a}=this;if(r[0])t.push(r[0]);else if(n.length===2){const[i,s]=n;t.push(i.slice(1)),t.push(s.slice(1))}else a[0]&&t.push(...Dt(a[0]))}return t}getMatchNumOfReady(){const{faces:t,doubles:r,partners:n}=this,a=Math.floor(this.size/3),i=t.length+n.length-a;return a*2-t.length*2-r.length-n.length+(i>0?i:0)}}var Pl=Math.floor,wl=Math.random;function Ml(e,t){return e+Pl(wl()*(t-e+1))}var El=Ml,Nl=ee,Fl=oe,Dl=Ye,Ll=_;function Rl(e,t,r){if(!Ll(r))return!1;var n=typeof t;return(n=="number"?Fl(r)&&Dl(t,r.length):n=="string"&&t in r)?Nl(r[t],e):!1}var Bl=Rl,Gl=/\s/;function Ul(e){for(var t=e.length;t--&&Gl.test(e.charAt(t)););return t}var xl=Ul,zl=xl,Kl=/^\s+/;function Hl(e){return e&&e.slice(0,zl(e)+1).replace(Kl,"")}var kl=Hl,ql=N,Wl=P,Vl="[object Symbol]";function Yl(e){return typeof e=="symbol"||Wl(e)&&ql(e)==Vl}var Jl=Yl,Xl=kl,Rt=_,Zl=Jl,Bt=0/0,Ql=/^[-+]0x[0-9a-f]+$/i,eh=/^0b[01]+$/i,th=/^0o[0-7]+$/i,rh=parseInt;function nh(e){if(typeof e=="number")return e;if(Zl(e))return Bt;if(Rt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Rt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Xl(e);var r=eh.test(e);return r||th.test(e)?rh(e.slice(2),r?2:8):Ql.test(e)?Bt:+e}var ah=nh,ih=ah,Gt=1/0,sh=17976931348623157e292;function oh(e){if(!e)return e===0?e:0;if(e=ih(e),e===Gt||e===-Gt){var t=e<0?-1:1;return t*sh}return e===e?e:0}var ch=oh,uh=El,fh=Bl,Ut=ch,lh=parseFloat,hh=Math.min,gh=Math.random;function dh(e,t,r){if(r&&typeof r!="boolean"&&fh(e,t,r)&&(t=r=void 0),r===void 0&&(typeof t=="boolean"?(r=t,t=void 0):typeof e=="boolean"&&(r=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Ut(e),t===void 0?(t=e,e=0):t=Ut(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var a=gh();return hh(e+a*(t-e+lh("1e-"+((a+"").length-1))),t)}return uh(e,t)}var vh=dh;const ph=X(vh);function yh(e){const t=e.split("").map(n=>n.charCodeAt(0));let r=0;return t.forEach(n=>{r+=n%10}),r=r%10+1,t.map(n=>n*r).join("")}function bh(e,t){let r=yh(e);const n=[];for(let a=0;a<t;a++){const i=r.slice(0,3),s=Number(i)%(t-a);n.push(s),r=r.slice(3)+s*t}return n}function $h(){const e=["m","p","s"],t=[];for(const r of e)for(let n=1;n<10;n++)t.push(n+r,n+r,n+r,n+r);for(let r=1;r<8;r++)t.push(r+"z",r+"z",r+"z",r+"z");return t}function xt(e){const t=bh(e,136),r=$h();return t.map(a=>r.splice(a,1)[0])}function _h(){const e="0".charCodeAt(0),t="z".charCodeAt(0);let r="";for(;!/\d/.test(r)&&!/[A-Za-z]/.test(r);)r=String.fromCharCode(ph(e,t));return r}function Th(e){let t="";for(let r=0;r<e;r++)t+=_h();return t}function Sh(){const e=Th(10);return{key:e,mahJongs:xt(e)}}o.NUM_TYPES=It,o.PairNode=Lt,o.TYPES=Ct,o.WORD_TYPE=Pt,o.autoSortingTiles=kt,o.createRandomMahjongs=Sh,o.getAnalyseResult=F,o.getCharNumOfString=Ht,o.getMatchNumOfReady=Il,o.getMatchesOfBoth=Et,o.getMatchesOfEdge=Ft,o.getMatchesOfPartner=Dt,o.getMatchesOfSuccess=Cl,o.getMatchesOfThreshold=Nt,o.getOneMatchMahjongs=xt,o.getSrotedNumArray=y,o.groupByType=L,o.isBoth=be,o.isDouble=Sl,o.isEdge=_e,o.isFace=Tl,o.isFourfold=ml,o.isNumType=M,o.isPartner=Ol,o.isReady=Al,o.isSequence=wt,o.isSizeDigits=D,o.isSuceess=jl,o.isThreshold=$e,o.isTriplet=Mt,o.isType=Y,o.isWordType=_l,o.mergeWithType=R,o.partitionBothPartner=me,o.partitionDouble=O,o.partitionEdgePartner=Oe,o.partitionSequence=Se,o.partitionThresholdPartner=Ae,o.partitionTriplet=Te,o.replaceTile=qt,o.splitOutDoubleOfPair=Ie,o.splitOutFaceOfPair=Ce,o.splitOutPartnerOfPair=Pe,o.splitSingles=je,o.splitTiles=d,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
